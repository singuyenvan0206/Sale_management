<Window x:Class="WpfApp1.ReportsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        Title="Reports &amp; Statistics" Height="700" Width="1100"
        WindowStartupLocation="CenterScreen">

    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#1CB5E0" Padding="16">
            <TextBlock Text="ðŸ“Š Reports &amp; Statistics"
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"/>
        </Border>

        <!-- Filters -->
        <Border Grid.Row="1" Margin="20,16,20,8" Background="White" CornerRadius="12" Padding="12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="160"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="160"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="240"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="From:" VerticalAlignment="Center"/>
                <DatePicker x:Name="FromDatePicker" Grid.Column="1" SelectedDateChanged="FilterChanged"/>
                <TextBlock Grid.Column="2" Text="To:" VerticalAlignment="Center" Margin="12,0,0,0"/>
                <DatePicker x:Name="ToDatePicker" Grid.Column="3" SelectedDateChanged="FilterChanged"/>
                <TextBlock Grid.Column="4" Text="Customer:" VerticalAlignment="Center" Margin="12,0,0,0"/>
                <ComboBox x:Name="CustomerComboBox" Grid.Column="5" DisplayMemberPath="Name" SelectedValuePath="Id" SelectionChanged="FilterChanged"/>
                <TextBox x:Name="SearchTextBox" Grid.Column="6" Height="28" Margin="12,0,12,0" TextChanged="FilterChanged"/>
                <Button Grid.Column="7" Content="Refresh" Width="100" Click="RefreshButton_Click"/>
                <Button Grid.Column="8" Content="Export CSV" Width="110" Margin="8,0,0,0" Click="ExportCsvButton_Click"/>
            </Grid>
        </Border>

        <!-- Data -->
        <Grid Grid.Row="2" Margin="20,8,20,8">
            <Grid.RowDefinitions>
                <RowDefinition Height="2*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Border Grid.Row="0" Background="White" CornerRadius="12" Padding="12" Margin="0,0,0,8">
                <DataGrid x:Name="InvoicesDataGrid" AutoGenerateColumns="False" CanUserAddRows="False" SelectionMode="Single" Margin="0,0,-2,94">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="#" Binding="{Binding Id}" Width="60" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Date" Binding="{Binding CreatedDate, StringFormat=yyyy-MM-dd HH:mm}" Width="160" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Customer" Binding="{Binding CustomerName}" Width="*" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Subtotal" Binding="{Binding Subtotal, StringFormat=F2}" Width="110" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Tax" Binding="{Binding TaxAmount, StringFormat=F2}" Width="100" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Discount" Binding="{Binding Discount, StringFormat=F2}" Width="110" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Total" Binding="{Binding Total, StringFormat=F2}" Width="110" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Paid" Binding="{Binding Paid, StringFormat=F2}" Width="110" IsReadOnly="True"/>
                        <DataGridTemplateColumn Header="Actions" Width="180">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="Details" Click="DetailsButton_Click"/>
                                        <Button Content="Print" Margin="6,0,0,0" Click="PrintButton_Click"/>
                                        <Button Content="Delete" Margin="6,0,0,0" Background="#FC5C7D" Foreground="White" Click="DeleteButton_Click"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
            <Grid Margin="0,204,0,0" Grid.RowSpan="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Border Background="White" CornerRadius="12" Padding="12" Margin="0,0,8,0">
                    <StackPanel>
                        <TextBlock Text="Revenue (Last 30 Days)" FontWeight="SemiBold" Margin="0,0,0,8"/>
                        <oxy:PlotView x:Name="RevenuePlot" Height="220"/>
                    </StackPanel>
                </Border>
                <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="12" Margin="8,0,0,0">
                    <StackPanel>
                        <TextBlock Text="Top Products (Qty)" FontWeight="SemiBold" Margin="0,0,0,8"/>
                        <oxy:PlotView x:Name="TopProductsPlot" Height="220" RenderTransformOrigin="0.5,0.5">
                            <oxy:PlotView.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform/>
                                    <SkewTransform AngleX="0"/>
                                    <RotateTransform/>
                                    <TranslateTransform X="0"/>
                                </TransformGroup>
                            </oxy:PlotView.RenderTransform>
                        </oxy:PlotView>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>

        <!-- Summary -->
        <Border Grid.Row="3" Margin="20,8,20,20" Background="White" CornerRadius="12" Padding="12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="StatusTextBlock" Grid.Column="0" Text="" VerticalAlignment="Center"/>
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="Count:" Margin="0,0,8,0"/>
                    <TextBlock x:Name="CountTextBlock" Margin="0,0,16,0"/>
                    <TextBlock Text="Revenue:" Margin="0,0,8,0"/>
                    <TextBlock x:Name="RevenueTextBlock"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
